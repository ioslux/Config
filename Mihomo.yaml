#âš“ï¸ é”šç‚¹åŒºå¼€å§‹
# é”šç‚¹ - è¿œç¨‹è®¢é˜…ç»„
PProviders: &PProviders {type: http, interval: 86400, health-check: {enable: true, url: 'http://www.apple.com/library/test/success.html', interval: 300}, filter: '^(?!.*(ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author))'}
# é”šç‚¹ - ç­›é€‰ç»„ 
FilterHK: &FilterHK '^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|æ¸¯|(\b(HK|HKG|Hong Kong|HongKong|hongkong)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterSG: &FilterSG '^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|æ–°å›½|ç‹®|å¡|ç‹®åŸ|(\b(SG|SGP|Singapore|SIN)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterJP: &FilterJP '^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|(\b(JP|JPN|Japan|Tokyo|NRT|KIX)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterKR: &FilterKR '^(?=.*((?i)ğŸ‡°ğŸ‡·|éŸ©å›½|éŸ“|é¦–å°”|æ˜¥å·|éŸ©|(\b(KR|KOR|Korea|Seoul|ICN)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterUS: &FilterUS '^(?=.*((?i)ğŸ‡ºğŸ‡¸|ç¾|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|(\b(US|USA|United States|America|ATL|BUF|DFW|EWR|IAD|LAX|MCI|MIA|ORD|PHX|PDX|SEA|SJC)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterTW: &FilterTW '^(?=.*((?i)ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|å°æ¹¾|å°åŒ—|å°|æ–°åŒ—|å½°åŒ–|(\b(TW|TWN|Tai|Taiwan|TPE|KHH)(\d+)?\b)))(?!.*((?i)å›å›½|CN|ä¸­å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterOther: &FilterOther '^(?=.*(.*))(?!.*((?i)ğŸ‡­ğŸ‡°|ğŸ‡²ğŸ‡´|ğŸ‡¹ğŸ‡¼|ğŸ‡¯ğŸ‡µ|ğŸ‡°ğŸ‡·|ğŸ‡¸ğŸ‡¬|ğŸ‡ºğŸ‡¸|é¦™æ¸¯|æ¸¯|æ¾³é—¨|å°æ¹¾|å°åŒ—|å°|æ–°åŒ—|å½°åŒ–|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|éŸ©å›½|é¦–å°”|æ˜¥å·|éŸ©|éŸ“|æ–°åŠ å¡|æ–°å›½|ç‹®|å¡|ç‹®åŸ|ç¾|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|è¿è¡Œ|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|åˆ°æœŸ|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|ç¾¤|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|ğŸ®|(\b(HK|hk|Hong Kong|HongKong|hongkong|HKG|MO|MAC|Oman|Macau|Macao|TW|Taiwan|TPE|KHH|JP|Japan|Tokyo|NRT|KIX|KR|Korea|KOR|Seoul|SG|SGP|Singapore|SIN|US|USA|United States|America|ATL|BUF|DFW|EWR|IAD|LAX|MCI|MIA|ORD|PHX|PDX|SEA|SJC|GAME|USE|USED|TOTAL|EXPIRE|EMAIL|Panel)\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'
FilterAll: &FilterAll '^(?!.*(ç›´è¿|è¿è¡Œ|ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|CN|ä¸­å›½|USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author))'
# é”šç‚¹ - ç­–ç•¥ç»„
UrlTest: &UrlTest {type: url-test, interval: 60, tolerance: 20, lazy: true, url: 'http://www.apple.com/library/test/success.html', disable-udp: false, timeout: 2000, max-failed-times: 3, hidden: true, include-all: true, proxies: [REJECT]}
FallBack: &FallBack {type: fallback, interval: 30, lazy: true, url: 'http://www.apple.com/library/test/success.html', disable-udp: false, timeout: 2000, max-failed-times: 3, hidden: false}
LoadBalanceCH: &LoadBalanceCH {type: load-balance, interval: 30, lazy: true, url: 'http://www.apple.com/library/test/success.html', disable-udp: false, strategy: consistent-hashing, timeout: 2000, max-failed-times: 3, hidden: true, include-all: true}
LoadBalanceCR: &LoadBalanceCR {type: load-balance, interval: 30, lazy: true, url: 'http://www.apple.com/library/test/success.html', disable-udp: false, strategy: round-robin, timeout: 2000, max-failed-times: 3, hidden: true, include-all: true}

# é”šç‚¹ - é€‰æ‹©ç»„ 
SelectFB: &SelectFB {type: select, proxies: [å…¨çƒæ‰‹åŠ¨, é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, DIRECT]}
SelectHK: &SelectHK {type: select, proxies: [é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, å…¨çƒæ‰‹åŠ¨, DIRECT]}
SelectSG: &SelectSG {type: select, proxies: [æ–°å›½ç­–ç•¥, é¦™æ¸¯ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, å…¨çƒæ‰‹åŠ¨, DIRECT]}
SelectJP: &SelectJP {type: select, proxies: [æ—¥æœ¬ç­–ç•¥, ç¾å›½ç­–ç•¥, é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, éŸ©å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, å…¨çƒæ‰‹åŠ¨, DIRECT]}
SelectUS: &SelectUS {type: select, proxies: [ç¾å›½ç­–ç•¥, é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, å…¨çƒæ‰‹åŠ¨, DIRECT]}
SelectProxy: &SelectProxy {type: select, proxies: [é»˜è®¤ä»£ç†, é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, å…¨çƒæ‰‹åŠ¨, DIRECT]}
SelectDI: &SelectDI {type: select, proxies: [DIRECT, é»˜è®¤ä»£ç†, é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥]}
# é”šç‚¹ - è§„åˆ™é›† 
DomainMrs: &DomainMrs {type: http, interval: 86400, behavior: domain, format: mrs, proxy: DIRECT}
DomainText: &DomainText {type: http, interval: 86400, behavior: domain, format: text, proxy: DIRECT}
domainYaml: &domainYaml {type: http, interval: 86400, behavior: domain, format: yaml, proxy: DIRECT}
IPcidrMrs: &IPcidrMrs {type: http, interval: 86400, behavior: ipcidr, format: mrs, proxy: DIRECT}
IPcidrText: &IPcidrText {type: http, interval: 86400, behavior: ipcidr, format: text, proxy: DIRECT}
ClassicalText: &ClassicalText {type: http, interval: 86400, behavior: classical, format: text, proxy: DIRECT}
ClassicalYaml: &ClassicalYaml {type: http, interval: 86400, behavior: classical, format: yaml, proxy: DIRECT}
############################################## - âš“ï¸ é”šç‚¹åŒºç»“æŸ - ############################################## 

# è¿œç¨‹è®¢é˜…ç»„
# æ³¨æ„ï¼šè¯·æä¾›æ‚¨çš„æœºåœºè®¢é˜…é“¾æ¥ï¼Œæ¯ä¸ªé“¾æ¥ä¸€è¡Œï¼Œå¹¶ä¸ºæ¯ä¸ªæœºåœºå‘½åï¼Œæœ«å°¾çš„[A]ä¸ºæ¯ä¸ªèŠ‚ç‚¹æ·»åŠ æœºåœºåç§°å‰ç¼€ï¼Œå¯è‡ªå®šä¹‰
proxy-providers:
  #æœºåœºA: {<<: *PProviders, url: '', override: {additional-prefix: '[A] '}}
  æœºåœºA: {<<: *PProviders, url: '', override: {additional-prefix: '[A] '}}
  #æœºåœºA: {<<: *PProviders, url: '', override: {additional-prefix: '[A] '}}
  #æœºåœºB: {<<: *PProviders, url: '', override: {additional-prefix: '[B] '}}
  #æœºåœºC: {<<: *PProviders, url: '', override: {additional-prefix: '[C] '}}
  #æœºåœºD: {<<: *PProviders, url: '', override: {additional-prefix: '[D] '}}
  #æœºåœºE: {<<: *PProviders, url: '', override: {additional-prefix: '[E] '}}


# å…¨å±€é…ç½®
#redir-port: 7891 # é‡å®šå‘ç«¯å£ï¼Œç”¨äºé€æ˜ä»£ç†
#tproxy-port: 1536 # TProxy ç«¯å£ï¼Œæ”¯æŒ TUN æ¨¡å¼

port: 7892 # HTTP ä»£ç†ç«¯å£
socks-port: 7893 # SOCKS5 ä»£ç†ç«¯å£
mixed-port: 7890 # HTTP/SOCKS æ··åˆä»£ç†ç«¯å£
allow-lan: true # å…è®¸å±€åŸŸç½‘è®¾å¤‡è¿æ¥ä»£ç†
bind-address: "*" # ç»‘å®šåœ°å€ï¼Œé»˜è®¤ä¸ºæ‰€æœ‰ IP åœ°å€
#authentication:
#  - "username:password" # HTTP/SOCKS ä»£ç†è®¤è¯ï¼Œæ ¼å¼ä¸º ç”¨æˆ·å:å¯†ç 
#skip-auth-prefixes:
#  - 127.0.0.1/8 # è·³è¿‡æœ¬åœ°åœ°å€çš„è®¤è¯
#  - ::1/128 # è·³è¿‡ IPv6 æœ¬åœ°åœ°å€çš„è®¤è¯
#lan-allowed-ips:
#  - 0.0.0.0/0 # å…è®¸å±€åŸŸç½‘è®¿é—®çš„ IP åœ°å€èŒƒå›´ (IPv4)
#  - ::/0 # å…è®¸å±€åŸŸç½‘è®¿é—®çš„ IP åœ°å€èŒƒå›´ (IPv6)
#lan-disallowed-ips:
#  - 192.168.0.3/32 # å±€åŸŸç½‘ç¦æ­¢è®¿é—®çš„ç‰¹å®š IP åœ°å€

# always å¼€å¯ï¼Œå¼ºåˆ¶åŒ¹é…æ‰€æœ‰è¿›ç¨‹
# strict é»˜è®¤ï¼Œç”± Clash åˆ¤æ–­æ˜¯å¦å¼€å¯
# off ä¸åŒ¹é…è¿›ç¨‹ï¼Œæ¨èåœ¨è·¯ç”±å™¨ä¸Šä½¿ç”¨æ­¤æ¨¡å¼
find-process-mode: off
mode: rule # å·¥ä½œæ¨¡å¼ä¸ºè§„åˆ™æ¨¡å¼
geodata-mode: false # æ›´æ”¹ geoip ä½¿ç”¨æ–‡ä»¶ï¼Œmmdb æˆ–è€… datï¼Œå¯é€‰ true/false,trueä¸º dat
# standardï¼šæ ‡å‡†åŠ è½½å™¨
# memconservativeï¼šä¸“ä¸ºå†…å­˜å—é™ (å°å†…å­˜) è®¾å¤‡ä¼˜åŒ–çš„åŠ è½½å™¨ (é»˜è®¤å€¼)
geodata-loader: memconservative
geox-url: # Geo æ•°æ®åº“é…ç½®ï¼Œç”¨äºåœ°ç†ä½ç½®å’Œ ASN åŒ¹é…
  geoip: "https://jsd.onmicrosoft.cn/gh/MetaCubeX/meta-rules-dat@release/geoip.dat" # GeoIP æ•°æ®åº“
  geosite: "https://jsd.onmicrosoft.cn/gh/MetaCubeX/meta-rules-dat@release/geosite.dat" # GeoSite æ•°æ®åº“
  mmdb: "https://geodata.kelee.one/Country-Masaiki.mmdb" # GeoIP mmdb æ•°æ®åº“
  asn: "https://geodata.kelee.one/GeoLite2-ASN-P3TERX.mmdb" # ASN æ•°æ®åº“
geo-auto-update: false # å¼€å¯è‡ªåŠ¨æ›´æ–° Geo æ•°æ®åº“
geo-update-interval: 24 # Geo æ•°æ®åº“æ›´æ–°é—´éš” (å•ä½: å°æ—¶)
# GeoSite ä½¿ç”¨çš„åŒ¹é…å™¨å®ç°ï¼Œå¯ç”¨çš„å®ç°ï¼š
# - succinctï¼ˆé»˜è®¤ï¼Œä¸è§„åˆ™é›†ç›¸åŒï¼‰
# - mphï¼ˆæ¥è‡ª V2Rayï¼Œåœ¨ Xray ä¸­ä¹Ÿæ˜¯ `hybrid`ï¼‰
geosite-matcher: succinct

global-ua: clash.meta # è‡ªå®šå…¨å±€ UA
etag-support: true # å¤–éƒ¨èµ„æºä¸‹è½½çš„ ETag æ”¯æŒ
# silent é™é»˜ï¼Œä¸è¾“å‡º
# error ä»…è¾“å‡ºå‘ç”Ÿé”™è¯¯è‡³æ— æ³•ä½¿ç”¨çš„æ—¥å¿—
# warning è¾“å‡ºå‘ç”Ÿé”™è¯¯ä½†ä¸å½±å“è¿è¡Œçš„æ—¥å¿—ï¼Œä»¥åŠ error çº§åˆ«å†…å®¹
# info è¾“å‡ºä¸€èˆ¬è¿è¡Œçš„å†…å®¹ï¼Œä»¥åŠ error å’Œ warning çº§åˆ«çš„æ—¥å¿—
# debug å°½å¯èƒ½çš„è¾“å‡ºè¿è¡Œä¸­æ‰€æœ‰çš„ä¿¡æ¯
log-level: info # æ—¥å¿—ç­‰çº§
ipv6: true # å¯ç”¨ IPv6
#tls: # TLS ç›¸å…³é…ç½®
#  certificate: string # TLS è¯ä¹¦
#  private-key: string # TLS ç§é’¥
#  custom-certifactes: # è‡ªå®šä¹‰è¯ä¹¦
#    - |
#      -----BEGIN CERTIFICATE-----
#      format/pem...
#      -----END CERTIFICATE-----

external-controller: 0.0.0.0:9090 # å¤–éƒ¨æ§åˆ¶ç«¯å£
#external-controller-tls: 0.0.0.0:9443 # TLS å¤–éƒ¨æ§åˆ¶ç«¯å£
secret: "" # æ§åˆ¶æ¥å£å¯†é’¥

# RESTful API CORSæ ‡å¤´é…ç½®
external-controller-cors: # CORS é…ç½®
  allow-origins: # å…è®¸æ¥æº
    - "*"
  allow-private-network: true # å…è®¸ç§æœ‰ç½‘ç»œè®¿é—®
#external-controller-unix: mihomo.sock  # Unix Socket æ§åˆ¶æ¥å£
#external-controller-pipe: \\.\pipe\mihomo  # Windows ç®¡é“æ¥å£

unified-delay: true # å¼€å¯ç»Ÿä¸€å»¶è¿Ÿæ—¶
tcp-concurrent: true # å¯ç”¨ TCP å¹¶å‘è¿æ¥
external-ui: ui # å¤–éƒ¨ UI ç›®å½•
external-ui-name: xd # å¤–éƒ¨ UI åç§°
external-ui-url: "https://ghfast.top/github.com/Zephyruso/zashboard/releases/latest/download/dist.zip" # å¤–éƒ¨ UI ä¸‹è½½é“¾æ¥
external-doh-server: /dns-query # å¤–éƒ¨ DoH æœåŠ¡å™¨
#interface-name:  # ä½¿ç”¨çš„ç½‘ç»œæ¥å£åç§°
#routing-mark:  # è·¯ç”±æ ‡è®°
global-client-fingerprint: chrome # å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹ä¸º Chrome

# ç¼“è§£ç§»åŠ¨è®¾å¤‡è€—ç”µé—®é¢˜
# https://github.com/vernesong/OpenClash/issues/2614
disable-keep-alive: true # ç¦ç”¨ TCP Keep Aliveï¼Œåœ¨ Android é»˜è®¤ä¸º true
keep-alive-idle: 15 # Keep-Alive ç©ºé—²æ—¶é—´ (å•ä½: ç§’)
keep-alive-interval: 15 # Keep-Alive é—´éš”æ—¶é—´ (å•ä½: ç§’)

# å®éªŒæ€§åŠŸèƒ½é…ç½®
experimental:
  quic-go-disable-gso: false # ç¦ç”¨ QUIC åè®®ä¸­çš„ GSO (Generic Segmentation Offload) åŠŸèƒ½
  quic-go-disable-ecn: false #ç¦ç”¨ECN
  dialer-ip4p-convert: false # å¯ç”¨IP4Påœ°å€è½¬æ¢

# æœ¬åœ° DNS è§£æé…ç½®
hosts:
  dns.alidns.com:
    - 223.5.5.5
    - 223.6.6.6
    - 2400:3200::1
    - 2400:3200:baba::1
  dns.google:
    - 8.8.4.4
    - 8.8.8.8
    - 2001:4860:4860::8844
    - 2001:4860:4860::8888

profile:
  store-selected: true # å­˜å‚¨å·²é€‰æ‹©çš„ä»£ç†ç»„
  store-fake-ip: true # å­˜å‚¨ Fake IP åœ°å€

# ç½‘ç»œæ—¶é—´åè®® (NTP) è®¾ç½®
ntp:
  enable: false # å¯ç”¨ NTP åŠŸèƒ½
  write-to-system: false # å°†åŒæ­¥çš„æ—¶é—´å†™å…¥ç³»ç»Ÿæ—¶é’Ÿï¼Œéœ€rootæƒé™
  server: ntp.ntsc.ac.cn # NTP æœåŠ¡å™¨åœ°å€
  port: 123 # NTP æœåŠ¡å™¨ç«¯å£ï¼Œé»˜è®¤ä½¿ç”¨ 123 ç«¯å£
  interval: 30 # åŒæ­¥æ—¶é—´çš„é—´éš” (å•ä½: åˆ†é’Ÿ)
  
sniffer:
  enable: true # æ˜¯å¦å¯ç”¨ sniffer ä¾¦æµ‹åŠŸèƒ½ï¼Œé»˜è®¤å…³é—­
  force-dns-mapping: false # å¯¹ redir-host ç±»å‹è¯†åˆ«çš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  parse-pure-ip: false # å¯¹æ‰€æœ‰æœªè·å–åˆ°åŸŸåçš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  override-destination: false # æ˜¯å¦ä½¿ç”¨å—…æ¢ç»“æœä½œä¸ºå®é™…è®¿é—®ï¼Œé»˜è®¤ä¸º true
  sniff:
    HTTP:
      ports: [80, 8080-8880] # å¯¹ HTTP æµé‡è¿›è¡Œå—…æ¢çš„ç«¯å£èŒƒå›´ï¼Œå¸¸ç”¨äºç½‘ç«™å’Œåº”ç”¨
      override-destination: true # è¦†ç›–ç›®æ ‡åœ°å€ä»¥å¼ºåˆ¶æµé‡èµ°ä»£ç†æˆ–è§„åˆ™åŒ¹é…
    TLS:
      ports: [443, 8443] # å¯¹ HTTPS æµé‡çš„ç«¯å£è¿›è¡Œå—…æ¢ï¼Œé€šå¸¸ç”¨äºåŠ å¯†è¿æ¥
    QUIC:
      ports: [443, 8443] # å¯¹ QUIC åè®®çš„æµé‡è¿›è¡Œå—…æ¢ï¼ŒQUI C å¸¸ç”¨äºæ”¹è¿› HTTPS è¿æ¥çš„é€Ÿåº¦
  force-domain:
    - "+.v2ex.com" # å¯¹æŒ‡å®šåŸŸåå¼ºåˆ¶è§£æï¼Œå³ä½¿ IP åœ°å€å·²ç¼“å­˜æˆ–å·²çŸ¥
  skip-domain:
    - Mijia.Cloud.com # è·³è¿‡æŒ‡å®šåŸŸåï¼Œä¸å¯¹å…¶è¿›è¡Œå—…æ¢å¤„ç†ï¼ˆå¦‚æ™ºèƒ½å®¶å±…æµé‡ï¼‰
  skip-src-address:
    - 192.168.0.3/32 # è·³è¿‡æ¥æº IP åœ°å€ï¼Œä¸å¯¹å…¶è¿›è¡Œå—…æ¢
  skip-dst-address:
    - 192.168.0.3/32 # è·³è¿‡ç›®æ ‡ IP åœ°å€ï¼Œä¸å¯¹å…¶è¿›è¡Œå—…æ¢

tun:
  enable: true # å¯ç”¨ TUN æ¨¡å¼ï¼Œç”¨äºé€æ˜ä»£ç†
  stack: gvisor # ä½¿ç”¨ç©ºé—´ç½‘ç»œæ ˆå¤„ç†æµé‡ï¼Œå¯ç”¨å€¼ï¼š system/gvisor/mixed
  auto-route: true # è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±ï¼Œå¯ä»¥è‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿›å…¥ tun ç½‘å¡ã€‚
#  auto-redirect: true # è‡ªåŠ¨é…ç½® iptables/nftables ä»¥é‡å®šå‘ TCP è¿æ¥, éœ€è¦auto-routeå·²å¯ç”¨, éœ€è¦rootæƒé™
  auto-detect-interface: true # è‡ªåŠ¨é€‰æ‹©æµé‡å‡ºå£æ¥å£ï¼Œå¤šå‡ºå£ç½‘å¡åŒæ—¶è¿æ¥çš„è®¾å¤‡å»ºè®®æ‰‹åŠ¨æŒ‡å®šå‡ºå£ç½‘å¡
  dns-hijack:
    - any:53 # åŠ«æŒæ‰€æœ‰ 53 ç«¯å£çš„ DNS è¯·æ±‚
    - tcp://any:53
  device: mihomo # æŒ‡å®š TUN è®¾å¤‡åç§°ï¼Œé»˜è®¤ä¸º utun
  mtu: 1500 # è®¾ç½®æœ€å¤§ä¼ è¾“å•å…ƒ (MTU)ï¼Œæé«˜ç½‘ç»œååé‡
  strict-route: true # å¯ç”¨ auto-route æ—¶æ‰§è¡Œä¸¥æ ¼çš„è·¯ç”±è§„åˆ™
  gso: true # é€šç”¨åˆ†æ®µå¸è½½ (GSO)ï¼Œæé«˜ç½‘ç»œæ€§èƒ½
  gso-max-size: 65536 # è®¾ç½® GSO æœ€å¤§åˆ†æ®µå¤§å°ä¸º 65536 å­—èŠ‚
  udp-timeout: 300 # è®¾ç½® UDP è¶…æ—¶æ—¶é—´ä¸º 300 ç§’ï¼Œä¼˜åŒ– NAT æ˜ å°„
#  iproute2-table-index: 2022 # ä½¿ç”¨æŒ‡å®šçš„è·¯ç”±è¡¨ç´¢å¼• (iproute2)
#  iproute2-rule-index: 9000 # è®¾ç½®è·¯ç”±è§„åˆ™çš„ç´¢å¼• (iproute2)
  endpoint-independent-nat: false # å¯ç”¨ç‹¬ç«‹äºç«¯ç‚¹çš„ NATï¼Œæ€§èƒ½å¯èƒ½ä¼šç•¥æœ‰ä¸‹é™ï¼Œæ‰€ä»¥ä¸å»ºè®®åœ¨ä¸éœ€è¦çš„æ—¶å€™å¼€å¯

    
dns:
  enable: true # å¯ç”¨ DNS æ¨¡å—
  cache-algorithm: arc # ç¼“å­˜ç®—æ³•ï¼Œå‚æ•°:lru æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œarc è‡ªé€‚åº”æ›¿æ¢ç¼“å­˜
  prefer-h3: false # DOH ä¼˜å…ˆä½¿ç”¨ http/3
  use-hosts: true # ä½¿ç”¨é…ç½®ä¸­çš„ hosts æ–‡ä»¶æ¡ç›®
  use-system-hosts: true # ä½¿ç”¨ç³»ç»Ÿçš„ hosts æ–‡ä»¶æ¡ç›®
  respect-rules: false # dns è¿æ¥éµå®ˆè·¯ç”±è§„åˆ™ï¼Œéœ€é…ç½® proxy-server-nameserver, å¼ºçƒˆä¸å»ºè®®å’Œ prefer-h3 ä¸€èµ·ä½¿ç”¨, ä¸éµå®ˆ nameserver-policy å†²çª 
  listen: 0.0.0.0:1053 # æœ¬åœ° DNS ç›‘å¬ç«¯å£ï¼Œé»˜è®¤æ˜¯ 1053 ç«¯å£
  ipv6: true # å¯ç”¨ IPv6 DNS è§£æï¼Œé¿å… IPv6 åœ°å€çš„è§£æè¯·æ±‚
  default-nameserver: # ä¸æ¨èä½¿ç”¨ system 
    - 223.5.5.5
    - system
  enhanced-mode: fake-ip # å¯ç”¨å¢å¼ºæ¨¡å¼ redir-host or fake-ip
  fake-ip-range: 198.18.0.1/16 # fake-ip æ± è®¾ç½®
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - RULE-SET:ConnCheck,Private,LAN
    - "*"
    - +.lan
    - dns.alidns.com
    - cloudflare-dns.com
    - dns.google
    - dns.adguard-dns.com
    - dns.nextdns.io
    - public.dns.iij.jp
    - dns0.eu
    - dns.18bit.cn
    - 2025.dns1.top
    - dns.ipv4dns.com
  nameserver-policy:
    "+.jp":
      - "https://public.dns.iij.jp/dns-query#h3=true" # IIJ ï¼ˆæ—¥æœ¬ï¼‰ DNS over H3
    "+.hk":
      - "quic://dns.nextdns.io" # NextDNSï¼ˆé¦™æ¸¯ï¼‰ DNS over DOQ
    "+.eu":
      - "quic://dns0.eu" # å…¬å…±ï¼ˆæ¬§æ´²ï¼‰ DNS over DOQ
    "RULE-SET:ConnCheck,Private,LAN":
      - "quic://dns.18bit.cn" # 18bit DNS over DOQ
      - "quic://dns.ipv4dns.com" # æ¸…æ–°äº‘ DNS over DOQ
      - "quic://2025.dns1.top" # å…³åœ£ DNS over DOQ
      # - "quic://dns.alidns.com" # é˜¿é‡Œ DNS over DOQ
  nameserver: # Google dnsåœ¨ api é¢æ¿ä¸­æ— æ³• DNS æŸ¥è¯¢ï¼Œå·²åˆ é™¤
    - "quic://dns.adguard-dns.com" # AdGuard DNS over DOQ
    # - "https://cloudflare-dns.com/dns-query#h3=true" # Cloudflare DNS over H3
  proxy-server-nameserver: # ä»£ç†èŠ‚ç‚¹åŸŸåè§£ææœåŠ¡å™¨ï¼Œä»…ç”¨äºè§£æä»£ç†èŠ‚ç‚¹çš„åŸŸåï¼Œä¸èƒ½ä½¿ç”¨ systemï¼Œä¸èƒ½è®¾ç½® ecs
    - "quic://dns.alidns.com" # é˜¿é‡Œ DNS over DOQ
  direct-nameserver: #  ç”¨äºç›´è¿å‡ºå£åŸŸåè§£æçš„ DNS æœåŠ¡å™¨ï¼Œä¸èƒ½ä½¿ç”¨ systemï¼Œä¸èƒ½è®¾ç½® ecs
    - "quic://dns.alidns.com" # é˜¿é‡Œ DNS over DOQ
  direct-nameserver-follow-policy: true # æ˜¯å¦éµå¾ª nameserver-policyï¼Œé»˜è®¤ä¸ºä¸éµå®ˆï¼Œä»…å½“ direct-nameserver ä¸ä¸ºç©ºæ—¶ç”Ÿæ•ˆ


# ç­–ç•¥ç»„ 
proxy-groups:
  - {name: é»˜è®¤ä»£ç†,   <<: *SelectFB}
  - {name: å…¨çƒæ‰‹åŠ¨,   type: select, include-all: true, filter: *FilterAll}
  - {name: AI,    <<: *SelectUS}
  - {name: Emby,     <<: *SelectDI}
  - {name: TikTok,  <<: *SelectJP}
  - {name: NetFlix,  <<: *SelectProxy}
  - {name: Spotify,  <<: *SelectHK}
  - {name: Telegram,  <<: *SelectProxy}
  - {name: æ¸¸æˆå¹³å°,  <<: *SelectDI}

  # åœ°åŒºç­–ç•¥
  - {name: é¦™æ¸¯ç­–ç•¥,  type: select, proxies: [é¦™æ¸¯è‡ªåŠ¨, é¦™æ¸¯å‡è¡¡], include-all: true, filter: *FilterHK}
  - {name: å°æ¹¾ç­–ç•¥,  type: select, proxies: [å°æ¹¾è‡ªåŠ¨, å°æ¹¾å‡è¡¡], include-all: true, filter: *FilterTW}
  - {name: æ–°å›½ç­–ç•¥,  type: select, proxies: [æ–°å›½è‡ªåŠ¨, æ–°å›½å‡è¡¡], include-all: true, filter: *FilterSG}
  - {name: æ—¥æœ¬ç­–ç•¥,  type: select, proxies: [æ—¥æœ¬è‡ªåŠ¨, æ—¥æœ¬å‡è¡¡], include-all: true, filter: *FilterJP}
  - {name: éŸ©å›½ç­–ç•¥,  type: select, proxies: [éŸ©å›½è‡ªåŠ¨, éŸ©å›½å‡è¡¡], include-all: true, filter: *FilterKR}
  - {name: ç¾å›½ç­–ç•¥,  type: select, proxies: [ç¾å›½è‡ªåŠ¨, ç¾å›½å‡è¡¡], include-all: true, filter: *FilterUS}
  - {name: å…¶ä»–ç­–ç•¥,  type: select, include-all: true, filter: *FilterOther}
  # å…¶ä»–ç­–ç•¥
  - {name: å…œåº•åˆ†æµ,   type: select, proxies: [é»˜è®¤ä»£ç†, DIRECT]}
  # è‡ªåŠ¨æµ‹é€Ÿ
  - {name: é¦™æ¸¯è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterHK}
  - {name: å°æ¹¾è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterTW}
  - {name: æ–°å›½è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterSG}
  - {name: æ—¥æœ¬è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterJP}
  - {name: éŸ©å›½è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterKR}
  - {name: ç¾å›½è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterUS}
  # è´Ÿè½½å‡è¡¡-è½®è¯¢
  - {name: é¦™æ¸¯å‡è¡¡,   <<: *LoadBalanceCR, filter: *FilterHK}
  - {name: å°æ¹¾å‡è¡¡,   <<: *LoadBalanceCR, filter: *FilterTW}
  - {name: æ–°å›½å‡è¡¡,   <<: *LoadBalanceCR, filter: *FilterSG}
  - {name: æ—¥æœ¬å‡è¡¡,   <<: *LoadBalanceCR, filter: *FilterJP}
  - {name: éŸ©å›½å‡è¡¡,   <<: *LoadBalanceCR, filter: *FilterKR}
  - {name: ç¾å›½å‡è¡¡,   <<: *LoadBalanceCR, filter: *FilterUS}

# è¿œç¨‹è§„åˆ™é›†
rule-providers:  
  # åŸŸåè§„åˆ™
  Tracking:       {<<: *DomainMrs, url: https://git.imee.me/https://github.com/666OS/rules/raw/release/mihomo/domain/Tracking.mrs}
  Advertising:    {<<: *DomainMrs, url: https://git.imee.me/https://github.com/666OS/rules/raw/release/mihomo/domain/Advertising.mrs} 
  Private:        {<<: *DomainMrs, url: https://git.imee.me/https://github.com/666OS/rules/raw/release/mihomo/domain/Private.mrs}
  ConnCheck:      {<<: *DomainMrs, url: https://git.imee.me/https://github.com/666OS/rules/raw/release/mihomo/domain/ConnCheck.mrs}
  XPTV:           {<<: *DomainMrs, url: https://git.imee.me/https://github.com/666OS/rules/raw/release/mihomo/domain/XPTV.mrs}    
  China:          {<<: *DomainMrs, url: https://git.imee.me/https://github.com/666OS/rules/raw/release/mihomo/domain/China.mrs}

  # IPè§„åˆ™
  AdvertisingIP:  {<<: *IPcidrMrs, url: https://git.imee.me/https://github.com/666OS/rules/raw/release/mihomo/ip/Advertising.mrs}
  PrivateIP:      {<<: *IPcidrMrs, url: https://git.imee.me/https://github.com/666OS/rules/raw/release/mihomo/ip/Private.mrs}
  XPTVIP:         {<<: *IPcidrMrs, url: https://git.imee.me/https://github.com/666OS/rules/raw/release/mihomo/ip/XPTV.mrs}
  ChinaIP:        {<<: *IPcidrMrs, url: https://git.imee.me/https://github.com/666OS/rules/raw/release/mihomo/ip/China.mrs}

  # yamlè§„åˆ™
  LAN:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/LAN_SPLITTER.yaml}
  Direct:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/Direct.yaml}
  Proxy:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/Proxy.yaml}
  ChinaDownloadCDN:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/ChinaDownloadCDN.yaml}
  InternationalDownloadCDN:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/InternationalDownloadCDN.yaml}
  AI:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/AI.yaml}
  TikTok:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/TikTok.yaml}
  SpeedtestInternational:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/SpeedtestInternational.yaml}
  SpeedtestChina:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/SpeedtestChina.yaml}
  Game:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/Game.yaml}
  Steam:        {<<: *ClassicalYaml, url: https://rule.kelee.one/Clash/Steam.yaml}
  Netflix:        {<<: *ClassicalYaml, url: https://rule.kelee.one/Clash/Netflix.yaml}
  Emby:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/EmbyServer.yaml}
  iCloudChina:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/iCloudChina.yaml}
  ApplePushNotificationService:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/ApplePushNotificationService.yaml}
  AppleSoftwareUpdates:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/AppleSoftwareUpdates.yaml}
  AppleID:        {<<: *ClassicalYaml, url: https://rule.kelee.one/Clash/AppleID.yaml}
  AppStore:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/AppStore.yaml}
  TestFlight:        {<<: *ClassicalYaml, url: https://rule.kelee.one/Clash/TestFlight.yaml}
  Microsoft:        {<<: *ClassicalYaml, url: https://rule.kelee.one/Clash/Microsoft.yaml}
  Google:        {<<: *ClassicalYaml, url: https://rule.kelee.one/Clash/Google.yaml}
  Telegram:        {<<: *ClassicalYaml, url: https://kelee.one/Tool/Clash/Rule/Telegram.yaml}


  # æ³„éœ²è§„åˆ™
  blockhttpdns_domain:        {<<: *DomainMrs, url: https://jsd.onmicrosoft.cn/gh/peiyingyao/Rule-for-OCD@master/rule/Clash/BlockHttpDNS/BlockHttpDNS_OCD_Domain.mrs}
  blockhttpdns_ip:        {<<: *IPcidrMrs, url: https://jsd.onmicrosoft.cn/gh/peiyingyao/Rule-for-OCD@master/rule/Clash/BlockHttpDNS/BlockHttpDNS_OCD_IP.mrs}
  stun_domain:        {<<: *DomainMrs, url: https://jsd.onmicrosoft.cn/gh/Kwisma/rules@main/rules/mihomo/STUN/STUN_Domain.mrs}


# è·¯ç”±
rules:
  # å¸¸ç”¨å¿…å¤‡
  - DOMAIN-KEYWORD,libvio,DIRECT

  # æ‹¦æˆªè§„åˆ™
  - RULE-SET,Tracking,REJECT
  - RULE-SET,Advertising,REJECT
  - OR,((RULE-SET,blockhttpdns_domain),(RULE-SET,blockhttpdns_ip,no-resolve)),REJECT
  - OR,((AND,((NETWORK,TCP),(DST-PORT,5349))),(AND,((NETWORK,UDP),(DST-PORT,5350))),(AND,((NETWORK,UDP),(DST-PORT,5351))),(AND,((NETWORK,UDP),(DST-PORT,19302))),(RULE-SET,stun_domain),(DST-PORT,3478)),REJECT

  # åŸŸåè§„åˆ™
  - RULE-SET,ConnCheck,DIRECT
  - RULE-SET,LAN, DIRECT
  - RULE-SET,Direct,DIRECT
  - RULE-SET,Private,DIRECT
  - RULE-SET,XPTV,DIRECT
  - RULE-SET,TestFlight,DIRECT
  - RULE-SET,iCloudChina,DIRECT
  - RULE-SET,ApplePushNotificationService,DIRECT
  - RULE-SET,AppleSoftwareUpdates,DIRECT
  - RULE-SET,AppleID,DIRECT
  - RULE-SET,AppStore,DIRECT
  - RULE-SET,ChinaDownloadCDN,DIRECT
  - RULE-SET,SpeedtestChina,DIRECT
  - RULE-SET,AI,AI
  - RULE-SET,TikTok,TikTok
  - RULE-SET,Emby,Emby
  - RULE-SET,Netflix,NetFlix
  - RULE-SET,SpeedtestInternational,é»˜è®¤ä»£ç†
  - RULE-SET,Proxy,é»˜è®¤ä»£ç†
  - RULE-SET,InternationalDownloadCDN,é»˜è®¤ä»£ç†
  - RULE-SET,Telegram,Telegram
  - RULE-SET,Game,æ¸¸æˆå¹³å°
  - RULE-SET,Steam,é»˜è®¤ä»£ç†
  - RULE-SET,Google,é»˜è®¤ä»£ç†
  - RULE-SET,Microsoft,é»˜è®¤ä»£ç†
  - RULE-SET,China,DIRECT


  # IPè§„åˆ™
  - RULE-SET,AdvertisingIP,REJECT,no-resolve
  - RULE-SET,PrivateIP,DIRECT,no-resolve
  - RULE-SET,XPTVIP,DIRECT,no-resolve
  - RULE-SET,ChinaIP,DIRECT

  - GEOIP,CN,DIRECT
  - MATCH,å…œåº•åˆ†æµ


