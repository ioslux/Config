#âš“ï¸ é”šç‚¹åŒºå¼€å§‹
# é”šç‚¹ - è¿œç¨‹è®¢é˜…ç»„
PProviders: &PProviders {type: http, interval: 86400, health-check: {enable: true, url: 'http://www.apple.com/library/test/success.html', interval: 300}, filter: '^(?!.*(ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author))'}
# é”šç‚¹ - ç­›é€‰ç»„ 
FilterHK: &FilterHK '^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|æ¸¯|(\b(HK|HKG|Hong Kong|HongKong|hongkong)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterSG: &FilterSG '^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|æ–°å›½|ç‹®|å¡|ç‹®åŸ|(\b(SG|SGP|Singapore|SIN)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterJP: &FilterJP '^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|(\b(JP|JPN|Japan|Tokyo|NRT|KIX)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterKR: &FilterKR '^(?=.*((?i)ğŸ‡°ğŸ‡·|éŸ©å›½|éŸ“|é¦–å°”|æ˜¥å·|éŸ©|(\b(KR|KOR|Korea|Seoul|ICN)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterUS: &FilterUS '^(?=.*((?i)ğŸ‡ºğŸ‡¸|ç¾|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|(\b(US|USA|United States|America|ATL|BUF|DFW|EWR|IAD|LAX|MCI|MIA|ORD|PHX|PDX|SEA|SJC)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterTW: &FilterTW '^(?=.*((?i)ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|å°æ¹¾|å°åŒ—|å°|æ–°åŒ—|å½°åŒ–|(\b(TW|TWN|Tai|Taiwan|TPE|KHH)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b))).*$'
FilterOther: &FilterOther '^(?=.*(.*))(?!.*((?i)ğŸ‡­ğŸ‡°|ğŸ‡²ğŸ‡´|ğŸ‡¹ğŸ‡¼|ğŸ‡¯ğŸ‡µ|ğŸ‡°ğŸ‡·|ğŸ‡¸ğŸ‡¬|ğŸ‡ºğŸ‡¸|é¦™æ¸¯|æ¸¯|æ¾³é—¨|å°æ¹¾|å°åŒ—|å°|æ–°åŒ—|å½°åŒ–|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|éŸ©å›½|é¦–å°”|æ˜¥å·|éŸ©|éŸ“|æ–°åŠ å¡|æ–°å›½|ç‹®|å¡|ç‹®åŸ|ç¾|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|è¿è¡Œ|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|åˆ°æœŸ|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|ç¾¤|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|ğŸ®|(\b(HK|hk|Hong Kong|HongKong|hongkong|HKG|MO|MAC|Oman|Macau|Macao|TW|Taiwan|TPE|KHH|JP|Japan|Tokyo|NRT|KIX|KR|Korea|KOR|Seoul|SG|SGP|Singapore|SIN|US|USA|United States|America|ATL|BUF|DFW|EWR|IAD|LAX|MCI|MIA|ORD|PHX|PDX|SEA|SJC|GAME|USE|USED|TOTAL|EXPIRE|EMAIL|Panel)\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'
FilterAll: &FilterAll '^(?!.*(ç›´è¿|è¿è¡Œ|ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author))'
# é”šç‚¹ - ç­–ç•¥ç»„
UrlTest: &UrlTest {type: url-test, interval: 60, tolerance: 20, lazy: true, url: 'http://www.apple.com/library/test/success.html', disable-udp: false, timeout: 2000, max-failed-times: 3, hidden: true, include-all: true, proxies: [REJECT]}
FallBack: &FallBack {type: fallback, interval: 30, lazy: true, url: 'http://www.apple.com/library/test/success.html', disable-udp: false, timeout: 2000, max-failed-times: 3, hidden: false}
LoadBalanceCH: &LoadBalanceCH {type: load-balance, interval: 30, lazy: true, url: 'http://www.apple.com/library/test/success.html', disable-udp: false, strategy: consistent-hashing, timeout: 2000, max-failed-times: 3, hidden: true, include-all: true}
LoadBalanceCR: &LoadBalanceCR {type: load-balance, interval: 30, lazy: true, url: 'http://www.apple.com/library/test/success.html', disable-udp: false, strategy: round-robin, timeout: 2000, max-failed-times: 3, hidden: true, include-all: true}

# é”šç‚¹ - é€‰æ‹©ç»„ 
SelectFB: &SelectFB {type: select, proxies: [å…¨çƒæ‰‹åŠ¨, é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, é“¾å¼ä»£ç†, DIRECT]}
SelectHK: &SelectHK {type: select, proxies: [é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, å…¨çƒæ‰‹åŠ¨, DIRECT]}
SelectSG: &SelectSG {type: select, proxies: [æ–°å›½ç­–ç•¥, é¦™æ¸¯ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, å…¨çƒæ‰‹åŠ¨, DIRECT]}
SelectJP: &SelectJP {type: select, proxies: [æ—¥æœ¬ç­–ç•¥, ç¾å›½ç­–ç•¥, é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, éŸ©å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, å…¨çƒæ‰‹åŠ¨, DIRECT]}
SelectUS: &SelectUS {type: select, proxies: [ç¾å›½ç­–ç•¥, é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, å…¨çƒæ‰‹åŠ¨, DIRECT]}
SelectProxy: &SelectProxy {type: select, proxies: [é»˜è®¤ä»£ç†, é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥, å…¨çƒæ‰‹åŠ¨, DIRECT]}
SelectDI: &SelectDI {type: select, proxies: [DIRECT, é»˜è®¤ä»£ç†, é¦™æ¸¯ç­–ç•¥, æ–°å›½ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥, å°æ¹¾ç­–ç•¥]}
# é”šç‚¹ - è§„åˆ™é›† 
DomainMrs: &DomainMrs {type: http, interval: 86400, behavior: domain, format: mrs}
DomainText: &DomainText {type: http, interval: 86400, behavior: domain, format: text}
domainYaml: &domainYaml {type: http, interval: 86400, behavior: domain, format: yaml}
IPcidrMrs: &IPcidrMrs {type: http, interval: 86400, behavior: ipcidr, format: mrs}
IPcidrText: &IPcidrText {type: http, interval: 86400, behavior: ipcidr, format: text}
ClassicalText: &ClassicalText {type: http, interval: 86400, behavior: classical, format: text}
ClassicalYaml: &ClassicalYaml {type: http, interval: 86400, behavior: classical, format: yaml}
############################################## - âš“ï¸ é”šç‚¹åŒºç»“æŸ - ############################################## 

# è¿œç¨‹è®¢é˜…ç»„
# æ³¨æ„ï¼šè¯·æä¾›æ‚¨çš„æœºåœºè®¢é˜…é“¾æ¥ï¼Œæ¯ä¸ªé“¾æ¥ä¸€è¡Œï¼Œå¹¶ä¸ºæ¯ä¸ªæœºåœºå‘½åï¼Œæœ«å°¾çš„[A]ä¸ºæ¯ä¸ªèŠ‚ç‚¹æ·»åŠ æœºåœºåç§°å‰ç¼€ï¼Œå¯è‡ªå®šä¹‰
proxy-providers:
  æœºåœºA: {<<: *PProviders, url: 'æœºåœºè®¢é˜…åœ°å€', override: {additional-prefix: '[A] '}}
  æœºåœºB: {<<: *PProviders, url: 'æœºåœºè®¢é˜…åœ°å€', override: {additional-prefix: '[B] '}}


# å…¨å±€é…ç½®
mode: rule
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7895
ipv6: true
allow-lan: true
unified-delay: true
tcp-concurrent: true
log-level: warning
bind-address: "*"
find-process-mode: 'off'
global-client-fingerprint: chrome
keep-alive-interval: 15
keep-alive-idle: 600
#authentication:
 # - mihomo:ioslux
skip-auth-prefixes:
  - 192.168.1.0/24
  - 192.168.31.0/24
  - 192.168.100.0/24
  - 127.0.0.1/8
  
external-ui-url: https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip
external-ui-name: zashboard
external-ui: ui
external-controller: 0.0.0.0:9090
secret: ""

# æœ¬åœ° DNS è§£æé…ç½®
hosts:
  ntp.ntsc.ac.cn: 
    - 114.118.7.161
    - 114.118.7.163

profile:
  store-selected: true
  store-fake-ip: true
  
sniffer:
  enable: true # æ˜¯å¦å¯ç”¨ sniffer ä¾¦æµ‹åŠŸèƒ½ï¼Œé»˜è®¤å…³é—­
  force-dns-mapping: true # å¯¹ redir-host ç±»å‹è¯†åˆ«çš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  parse-pure-ip: true # å¯¹æ‰€æœ‰æœªè·å–åˆ°åŸŸåçš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  override-destination: false # æ˜¯å¦ä½¿ç”¨å—…æ¢ç»“æœä½œä¸ºå®é™…è®¿é—®ï¼Œé»˜è®¤ä¸º true
  sniff:
    HTTP:
      ports: [80, 8080-8880] # å¯¹ HTTP æµé‡è¿›è¡Œå—…æ¢çš„ç«¯å£èŒƒå›´ï¼Œå¸¸ç”¨äºç½‘ç«™å’Œåº”ç”¨
      override-destination: true # è¦†ç›–ç›®æ ‡åœ°å€ä»¥å¼ºåˆ¶æµé‡èµ°ä»£ç†æˆ–è§„åˆ™åŒ¹é…
    TLS:
      ports: [443, 8443] # å¯¹ HTTPS æµé‡çš„ç«¯å£è¿›è¡Œå—…æ¢ï¼Œé€šå¸¸ç”¨äºåŠ å¯†è¿æ¥
    QUIC:
      ports: [443, 8443] # å¯¹ QUIC åè®®çš„æµé‡è¿›è¡Œå—…æ¢ï¼ŒQUI C å¸¸ç”¨äºæ”¹è¿› HTTPS è¿æ¥çš„é€Ÿåº¦
  force-domain:
    - +.v2ex.com # å¯¹æŒ‡å®šåŸŸåå¼ºåˆ¶è§£æï¼Œå³ä½¿ IP åœ°å€å·²ç¼“å­˜æˆ–å·²çŸ¥
  skip-domain:
    - Mijia.Cloud.com # è·³è¿‡æŒ‡å®šåŸŸåï¼Œä¸å¯¹å…¶è¿›è¡Œå—…æ¢å¤„ç†ï¼ˆå¦‚æ™ºèƒ½å®¶å±…æµé‡ï¼‰
  skip-src-address:
    - 192.168.0.3/32 # è·³è¿‡æ¥æº IP åœ°å€ï¼Œä¸å¯¹å…¶è¿›è¡Œå—…æ¢
  skip-dst-address:
    - 192.168.0.3/32 # è·³è¿‡ç›®æ ‡ IP åœ°å€ï¼Œä¸å¯¹å…¶è¿›è¡Œå—…æ¢

tun:
  enable: true # å¯ç”¨ TUN æ¨¡å¼ï¼Œç”¨äºé€æ˜ä»£ç†
  stack: gvisor # ä½¿ç”¨ç©ºé—´ç½‘ç»œæ ˆå¤„ç†æµé‡ï¼Œå¯ç”¨å€¼ï¼š system/gvisor/mixed
  auto-route: true # è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±ï¼Œå¯ä»¥è‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿›å…¥ tun ç½‘å¡ã€‚
#  auto-redirect: true # è‡ªåŠ¨é…ç½® iptables/nftables ä»¥é‡å®šå‘ TCP è¿æ¥, éœ€è¦auto-routeå·²å¯ç”¨, éœ€è¦rootæƒé™
  auto-detect-interface: true # è‡ªåŠ¨é€‰æ‹©æµé‡å‡ºå£æ¥å£ï¼Œå¤šå‡ºå£ç½‘å¡åŒæ—¶è¿æ¥çš„è®¾å¤‡å»ºè®®æ‰‹åŠ¨æŒ‡å®šå‡ºå£ç½‘å¡
  dns-hijack:
    - any:53 # åŠ«æŒæ‰€æœ‰ 53 ç«¯å£çš„ DNS è¯·æ±‚
    - tcp://any:53
  device: utun0 # æŒ‡å®š TUN è®¾å¤‡åç§°ï¼Œé»˜è®¤ä¸º utun
  mtu: 1500 # è®¾ç½®æœ€å¤§ä¼ è¾“å•å…ƒ (MTU)ï¼Œæé«˜ç½‘ç»œååé‡
  strict-route: true # å¯ç”¨ auto-route æ—¶æ‰§è¡Œä¸¥æ ¼çš„è·¯ç”±è§„åˆ™
  gso: true # é€šç”¨åˆ†æ®µå¸è½½ (GSO)ï¼Œæé«˜ç½‘ç»œæ€§èƒ½
  gso-max-size: 65536 # è®¾ç½® GSO æœ€å¤§åˆ†æ®µå¤§å°ä¸º 65536 å­—èŠ‚
  udp-timeout: 300 # è®¾ç½® UDP è¶…æ—¶æ—¶é—´ä¸º 300 ç§’ï¼Œä¼˜åŒ– NAT æ˜ å°„
#  iproute2-table-index: 2022 # ä½¿ç”¨æŒ‡å®šçš„è·¯ç”±è¡¨ç´¢å¼• (iproute2)
#  iproute2-rule-index: 9000 # è®¾ç½®è·¯ç”±è§„åˆ™çš„ç´¢å¼• (iproute2)
  endpoint-independent-nat: false # å¯ç”¨ç‹¬ç«‹äºç«¯ç‚¹çš„ NATï¼Œæ€§èƒ½å¯èƒ½ä¼šç•¥æœ‰ä¸‹é™ï¼Œæ‰€ä»¥ä¸å»ºè®®åœ¨ä¸éœ€è¦çš„æ—¶å€™å¼€å¯

    
dns:
  enable: true # å¯ç”¨ DNS æ¨¡å—
  cache-algorithm: arc # ç¼“å­˜ç®—æ³•ï¼Œå‚æ•°:lru æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œarc è‡ªé€‚åº”æ›¿æ¢ç¼“å­˜
  prefer-h3: false # DOH ä¼˜å…ˆä½¿ç”¨ http/3
  use-hosts: true # ä½¿ç”¨é…ç½®ä¸­çš„ hosts æ–‡ä»¶æ¡ç›®
  use-system-hosts: true # ä½¿ç”¨ç³»ç»Ÿçš„ hosts æ–‡ä»¶æ¡ç›®
  respect-rules: true # dns è¿æ¥éµå®ˆè·¯ç”±è§„åˆ™ï¼Œéœ€é…ç½® proxy-server-nameserver, å¼ºçƒˆä¸å»ºè®®å’Œ prefer-h3 ä¸€èµ·ä½¿ç”¨
  listen: 0.0.0.0:1053 # æœ¬åœ° DNS ç›‘å¬ç«¯å£ï¼Œé»˜è®¤æ˜¯ 1053 ç«¯å£
  ipv6: true # å¯ç”¨ IPv6 DNS è§£æï¼Œé¿å… IPv6 åœ°å€çš„è§£æè¯·æ±‚
  default-nameserver:
    - quic://223.5.5.5 # é˜¿é‡Œ DNS è§£æ DNS åŸŸå
    - quic://223.6.6.6 # é˜¿é‡Œ DNS è§£æ DNS åŸŸå
  enhanced-mode: fake-ip # å¯ç”¨å¢å¼ºæ¨¡å¼ redir-host or fake-ip
  fake-ip-range: 198.18.0.0/16 # fake-ip æ± è®¾ç½®
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - rule-set:connectivity-check
    - rule-set:private_domain
    - rule-set:cn_domain
    - +.miwifi.com
    - +.docker.io
    - +.market.xiaomi.com
    - +.push.apple.com
    - beiyong.dynuddns.net
    - dns.alidns.com
    - cloudflare-dns.com
    - dns.google
    - dns.adguard-dns.com
    - dns.nextdns.io
    - public.dns.iij.jp
    - dns0.eu
    - dns.18bit.cn
    - 2025.dns1.top
    - dns.ipv4dns.com
  nameserver-policy:
    "+.jp":
      - "https://public.dns.iij.jp/dns-query#h3=true" # IIJ ï¼ˆæ—¥æœ¬ï¼‰ DNS over H3
    "+.hk":
      - "quic://dns.nextdns.io" # NextDNSï¼ˆé¦™æ¸¯ï¼‰ DNS over DOQ
    "+.eu":
      - "quic://dns0.eu" # å…¬å…±ï¼ˆæ¬§æ´²ï¼‰ DNS over DOQ
    "RULE-SET:connectivity-check,private_domain,cn_domain":
      - "quic://dns.18bit.cn" # 18bit DNS over DOQ
      - "quic://dns.ipv4dns.com" # æ¸…æ–°äº‘ DNS over DOQ
      - "quic://2025.dns1.top" # å…³åœ£ DNS over DOQ
      - "quic://dns.alidns.com" # é˜¿é‡Œ DNS over DOQ
  nameserver:
    - "quic://dns.adguard-dns.com" # AdGuard DNS over DOQ
    - "https://cloudflare-dns.com/dns-query#h3=true" # Cloudflare DNS over H3
    - "https://dns.google/dns-query#h3=true" # Google DNS over H3
  proxy-server-nameserver: # ä»£ç†èŠ‚ç‚¹åŸŸåè§£ææœåŠ¡å™¨ï¼Œä»…ç”¨äºè§£æä»£ç†èŠ‚ç‚¹çš„åŸŸå
    - "quic://dns.alidns.com" # é˜¿é‡Œ DNS over DOQ
  direct-nameserver: #  ç”¨äºç›´è¿å‡ºå£åŸŸåè§£æçš„ DNS æœåŠ¡å™¨
    - "quic://dns.alidns.com" # é˜¿é‡Œ DNS over DOQ
  direct-nameserver-follow-policy: true # æ˜¯å¦éµå¾ª nameserver-policyï¼Œé»˜è®¤ä¸ºä¸éµå®ˆï¼Œä»…å½“ direct-nameserver ä¸ä¸ºç©ºæ—¶ç”Ÿæ•ˆ


# ç­–ç•¥ç»„ 
proxy-groups:
  - {name: é»˜è®¤ä»£ç†,   <<: *SelectFB}
  - {name: å…¨çƒæ‰‹åŠ¨,   type: select, include-all: true, filter: *FilterAll}
  - {name: AIå¹³å°,    <<: *SelectUS}
  - {name: Emby,     <<: *SelectDI}
  - {name: TikTok,  <<: *SelectJP}
  - {name: NetFlix,  <<: *SelectProxy}
  - {name: Spotify,  <<: *SelectHK}
  - {name: æ¸¸æˆå¹³å°,  <<: *SelectDI}
  - {name: ç½‘é€Ÿæµ‹è¯•,  <<: *SelectDI}
  # å…¬å¸
  - {name: å¾®è½¯æœåŠ¡,  <<: *SelectDI}
  - {name: é“¾å¼ä»£ç†,  type: relay, proxies: [ä¸­è½¬æœº, è½åœ°æœº]}
  - {name: ä¸­è½¬æœº,    type: select, proxies: [å…¨çƒæ‰‹åŠ¨, é¦™æ¸¯ç­–ç•¥, å°æ¹¾ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, æ–°å›½ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥]}
  - {name: è½åœ°æœº,    type: select, include-all: true, filter: *FilterAll}

  # åœ°åŒºç­–ç•¥
  - {name: é¦™æ¸¯ç­–ç•¥,  type: select, proxies: [é¦™æ¸¯è‡ªåŠ¨], include-all: true, filter: *FilterHK}
  - {name: æ–°å›½ç­–ç•¥,  type: select, proxies: [æ–°å›½è‡ªåŠ¨], include-all: true, filter: *FilterSG}
  - {name: æ—¥æœ¬ç­–ç•¥,  type: select, proxies: [æ—¥æœ¬è‡ªåŠ¨], include-all: true, filter: *FilterJP}
  - {name: éŸ©å›½ç­–ç•¥,  type: select, proxies: [éŸ©å›½è‡ªåŠ¨], include-all: true, filter: *FilterKR}
  - {name: ç¾å›½ç­–ç•¥,  type: select, proxies: [ç¾å›½è‡ªåŠ¨], include-all: true, filter: *FilterUS}
  - {name: å°æ¹¾ç­–ç•¥,  type: select, proxies: [å°æ¹¾è‡ªåŠ¨], include-all: true, filter: *FilterTW}
  - {name: å…¶ä»–ç­–ç•¥,  type: select, include-all: true, filter: *FilterOther}
  # å…¶ä»–ç­–ç•¥
  - {name: æŠ–å¿«ä¹¦å®šä½, type: select, proxies: [DIRECT, é¦™æ¸¯ç­–ç•¥, å°æ¹¾ç­–ç•¥, æ–°å›½ç­–ç•¥, æ—¥æœ¬ç­–ç•¥, éŸ©å›½ç­–ç•¥, ç¾å›½ç­–ç•¥]}
  - {name: æ¼ç½‘ä¹‹é±¼,   type: select, proxies: [é»˜è®¤ä»£ç†, DIRECT]}
  # è‡ªåŠ¨æµ‹é€Ÿ
  - {name: é¦™æ¸¯è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterHK}
  - {name: å°æ¹¾è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterTW}
  - {name: æ–°å›½è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterSG}
  - {name: æ—¥æœ¬è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterJP}
  - {name: éŸ©å›½è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterKR}
  - {name: ç¾å›½è‡ªåŠ¨,        <<: *UrlTest, filter: *FilterUS}
  # è´Ÿè½½å‡è¡¡-æ•£åˆ—
  - {name: é¦™æ¸¯å‡è¡¡-æ•£åˆ—,   <<: *LoadBalanceCH, filter: *FilterHK}
  - {name: å°æ¹¾å‡è¡¡-æ•£åˆ—,   <<: *LoadBalanceCH, filter: *FilterTW}
  - {name: æ–°å›½å‡è¡¡-æ•£åˆ—,   <<: *LoadBalanceCH, filter: *FilterSG}
  - {name: æ—¥æœ¬å‡è¡¡-æ•£åˆ—,   <<: *LoadBalanceCH, filter: *FilterJP}
  - {name: éŸ©å›½å‡è¡¡-æ•£åˆ—,   <<: *LoadBalanceCH, filter: *FilterKR}
  - {name: ç¾å›½å‡è¡¡-æ•£åˆ—,   <<: *LoadBalanceCH, filter: *FilterUS}
  # è´Ÿè½½å‡è¡¡-è½®è¯¢
  - {name: é¦™æ¸¯å‡è¡¡-è½®è¯¢,   <<: *LoadBalanceCR, filter: *FilterHK}
  - {name: å°æ¹¾å‡è¡¡-è½®è¯¢,   <<: *LoadBalanceCR, filter: *FilterTW}
  - {name: æ–°å›½å‡è¡¡-è½®è¯¢,   <<: *LoadBalanceCR, filter: *FilterSG}
  - {name: æ—¥æœ¬å‡è¡¡-è½®è¯¢,   <<: *LoadBalanceCR, filter: *FilterJP}
  - {name: éŸ©å›½å‡è¡¡-è½®è¯¢,   <<: *LoadBalanceCR, filter: *FilterKR}
  - {name: ç¾å›½å‡è¡¡-è½®è¯¢,   <<: *LoadBalanceCR, filter: *FilterUS}

# è¿œç¨‹è§„åˆ™é›†
rule-providers: 
  download:                  {<<: *ClassicalYaml, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/download.yaml}
  location_ip:               {<<: *ClassicalYaml, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/location_ip.yaml}
  XPTV:                      {<<: *ClassicalYaml, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/XPTV.yaml}
  fix-direct:                {<<: *ClassicalYaml, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/fix-direct.yaml}
  Line:                      {<<: *ClassicalYaml, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/Line.yaml}
  speedtest:                 {<<: *ClassicalYaml, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/speedtest.yaml}
  emby:                      {<<: *ClassicalText, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/emby.list}
  openai:                    {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/openai.mrs}
  telegram:                  {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/telegram.mrs}
  twitter:                   {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/twitter.mrs}
  instagram:                 {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/instagram.mrs}
  youtube:                   {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/youtube.mrs}
  spotify:                   {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/spotify.mrs}
  netflix:                   {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/netflix.mrs}
  disney:                    {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/disney.mrs}
  hbo:                       {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/hbo.mrs}
  tiktok:                    {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/tiktok.mrs}
  github:                    {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/github.mrs}
  onedrive:                  {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/onedrive.mrs}
  microsoft:                 {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/microsoft.mrs}
  facebook:                  {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/facebook.mrs}
  meta:                      {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/meta.mrs}
  google:                    {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/google.mrs}
  apple-cn:                  {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/apple-cn.mrs}
  apple:                     {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/apple.mrs}
  paypal@cn:                 {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/paypal@cn.mrs}
  paypal:                    {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/paypal.mrs}
  cloudflare-cn:             {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/cloudflare-cn.mrs}
  category-public-tracker:   {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/category-public-tracker.mrs}
  category-games:            {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/category-games.mrs}
  category-social-media-!cn: {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/category-social-media-!cn.mrs}
  category-ai-!cn:           {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/category-ai-!cn.mrs}
  geolocation-!cn:           {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/geolocation-!cn.mrs}
  connectivity-check:        {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/connectivity-check.mrs}
  private_domain:            {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/private.mrs}
  cn_domain:                 {<<: *DomainMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/cn.mrs}
  # IPè§„åˆ™é›†
  facebook_ip:               {<<: *IPcidrMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/facebook_ip.mrs}
  google_ip:                 {<<: *IPcidrMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/google_ip.mrs}
  netflix_ip:                {<<: *IPcidrMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/netflix_ip.mrs}
  twitter_ip:                {<<: *IPcidrMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/twitter_ip.mrs}
  telegram_ip:               {<<: *IPcidrMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/telegram_ip.mrs}
  private_ip:                {<<: *IPcidrMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/private_ip.mrs}
  cn_ip:                     {<<: *IPcidrMrs, url: https://github.com/666OS/YYDS/raw/main/mihomo/rules/cn_ip.mrs}

  # æ³„éœ²æ‹¦æˆª
  BlockHttpDNS:                     {<<: *DomainMrs, url: https://raw.githubusercontent.com/peiyingyao/Rule-for-OCD/master/rule/Clash/BlockHttpDNS/BlockHttpDNS_OCD_Domain.mrs}
  BlockHttpDNScidr:                     {<<: *IPcidrMrs, url: https://raw.githubusercontent.com/peiyingyao/Rule-for-OCD/master/rule/Clash/BlockHttpDNS/BlockHttpDNS_OCD_IP.mrs}
  STUN:                     {<<: *DomainMrs, url: https://cdn.jsdmirror.com/gh/Kwisma/rules@main/rules/mihomo/STUN/STUN_Domain.mrs}
# è·¯ç”±
rules:
  # å¸¸ç”¨å¿…å¤‡
  - DST-PORT,123,DIRECT
  - DOMAIN-KEYWORD,libvio,DIRECT
  - DOMAIN-SUFFIX,imee.me,DIRECT
  - DST-PORT,3478,REJECT
  - DOMAIN-KEYWORD,stun,REJECT
  - DOMAIN-KEYWORD,httpdns,REJECT
  - AND,((NETWORK,UDP),(DST-PORT,19302)),REJECT
  - AND,((NETWORK,UDP),(DST-PORT,5351)),REJECT
  - AND,((NETWORK,UDP),(DST-PORT,5350)),REJECT
  - AND,((NETWORK,TCP),(DST-PORT,5349)),REJECT
  # é˜²å¾¡
  - RULE-SET,category-public-tracker,REJECT-DROP
  - RULE-SET,BlockHttpDNS,REJECT
  - RULE-SET,BlockHttpDNScidr,REJECT
  - RULE-SET,STUN,REJECT
  # åŸŸåè·¯ç”±
  - RULE-SET,fix-direct,DIRECT
  - RULE-SET,XPTV,DIRECT
  - RULE-SET,location_ip,æŠ–å¿«ä¹¦å®šä½
  - RULE-SET,speedtest,ç½‘é€Ÿæµ‹è¯•
  - RULE-SET,openai,AIå¹³å°
  - RULE-SET,category-ai-!cn,AIå¹³å°
  - RULE-SET,telegram,é»˜è®¤ä»£ç†
  - RULE-SET,twitter,é»˜è®¤ä»£ç†
  - RULE-SET,emby,Emby
  - RULE-SET,youtube,é»˜è®¤ä»£ç†
  - RULE-SET,spotify,Spotify
  - RULE-SET,netflix,NetFlix
  - RULE-SET,disney,é»˜è®¤ä»£ç†
  - RULE-SET,hbo,é»˜è®¤ä»£ç†
  - RULE-SET,tiktok,TikTok
  - RULE-SET,github,é»˜è®¤ä»£ç†
  - RULE-SET,onedrive,é»˜è®¤ä»£ç†
  - RULE-SET,microsoft,å¾®è½¯æœåŠ¡
  - RULE-SET,instagram,é»˜è®¤ä»£ç†
  - RULE-SET,facebook,é»˜è®¤ä»£ç†
  - RULE-SET,meta,é»˜è®¤ä»£ç†
  - RULE-SET,google,é»˜è®¤ä»£ç†
  - RULE-SET,apple-cn,DIRECT
  - RULE-SET,apple,DIRECT
  - RULE-SET,paypal@cn,DIRECT
  - RULE-SET,paypal,DIRECT
  - RULE-SET,cloudflare-cn,DIRECT
  - RULE-SET,category-games,æ¸¸æˆå¹³å°
  - RULE-SET,Line,é»˜è®¤ä»£ç†
  - RULE-SET,category-social-media-!cn,é»˜è®¤ä»£ç†
  - RULE-SET,download,DIRECT
  - RULE-SET,cn_domain,DIRECT
  - RULE-SET,geolocation-!cn,é»˜è®¤ä»£ç†
  # IPè·¯ç”±
  - RULE-SET,private_ip,DIRECT,no-resolve
  - RULE-SET,facebook_ip,é»˜è®¤ä»£ç†,no-resolve
  - RULE-SET,google_ip,é»˜è®¤ä»£ç†,no-resolve
  - RULE-SET,netflix_ip,NetFlix,no-resolve
  - RULE-SET,twitter_ip,é»˜è®¤ä»£ç†,no-resolve
  - RULE-SET,telegram_ip,é»˜è®¤ä»£ç†,no-resolve
  - RULE-SET,cn_ip,DIRECT,no-resolve
  - MATCH,æ¼ç½‘ä¹‹é±¼
